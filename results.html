<!DOCTYPE html>
<html>
    <head>
        
        <title>JuanDirection</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <!-- Bootstrap core CSS -->
        <link href="dist/css/bootstrap.css" rel="stylesheet">
        
        <!-- Custom styles for this template -->
        <link href="results.css" rel="stylesheet">
		
		<!-- Leaflet -->
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
		<link rel="stylesheet" href="dist/leaflet-routing-machine.css" />
		
		<style>
			#map { height: 100%; }
		</style>
    </head>
	
    <body onload="initialize()">
		<!-- Header -->
		<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html"><img src="images\logo3.png" alt=""></a>
				</div>
				<div class="navbar-collapse collapse">
					<form class="navbar-form navbar-left" role="form">
						<div class="form-group">
							<input type="text"  id="autocomplete" placeholder="From" class="form-control"></input>
						</div>
						<div class="form-group">
							<input type="text"  id="autocomplete2" placeholder="To" class="form-control"></input>
						</div>
						<button id="search" class="thumb_up" title="Search" type="button"></button>
					</form>
				</div>
			</div>
		</div>
		

		<!-- Side -->
		<div class="sideNav" role="navigation">
			<div class="container">
				<div class="total">
					<h2>Total Time and Fare:</h2>
					<img src="images\total.png" alt="">
				</div>
				<div class="directions">
					<h2>Directions:</h2>
					<img src="images\1.png" alt="" width="100%">
					<img src="images\2.png" alt="" width="100%">
					<img src="images\3.png" alt="" width="100%">
				</div>
			</div>
		</div>
		

		<!-- Body -->
		<div class="map">
			
					<div id="map" style="width:100%;height:100%;"></div>
					
			<button class="thumb_up" title="Show Traffic" type="button"></button>
		</div>
	
		<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
		<script src="scripts/jquery-1.11.0.js" type="text/javascript"></script>
		<script src="dist/leaflet-routing-machine.min.js"></script>
		<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
		<script src="dist/src/L.Routing.OSRM.js"></script>
		<script src="dist/src/L.Routing.Line.js"></script>
		<script src="dist/src/L.Routing.Itinerary.js"></script>
		<script src="dist/src/L.Routing.Plan.js"></script>
		<script src="dist/src/L.Routing.Control.js"></script>
		<script src="dist/Control.Geocoder.js"></script>
		<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false"></script>
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
		<script>
			var autocomplete = new google.maps.places.Autocomplete(document.getElementById('autocomplete'));
			var autocomplete2 = new google.maps.places.Autocomplete(document.getElementById('autocomplete2'));
			var map = L.map('map').setView([14.55,120.9822], 11);
					
			$(document).ready(function(){
				$('#search').click(function(){
					var source = autocomplete.getPlace();						
					var destination = autocomplete2.getPlace();
							
					/**
					var map = L.map('map').setView(([source.geometry.location[0]+destination.geometry.location[0])/2,([source.geometry.location[1]+destination.geometry.location[1])/2], 14);

					// add an OpenStreetMap tile layer
					L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
						attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
					}).addTo(map);
					**/
					map.remove();
					map = L.map('map');
					L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
						attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
					}).addTo(map);
					
					L.Routing.control({
						waypoints: [
							L.latLng(source.geometry.location.lat(),source.geometry.location.lng()),
							L.latLng(destination.geometry.location.lat(),destination.geometry.location.lng())
						],
						geocoder: L.Control.Geocoder.nominatim()
					}).addTo(map);
					
				});
			});
					
			function initialize() {
				// add an OpenStreetMap tile layer
				L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
					attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
				}).addTo(map);
				
				// set the inputs with value from localStorage
				$('#autocomplete').val(localStorage["from"]);
				$('#autocomplete2').val(localStorage["to"]);

				
				/**
				var mapProp = {
					center: new google.maps.LatLng(14.55,120.9822),
							zoom:14,
					mapTypeId:google.maps.MapTypeId.ROADMAP
				};
				var map = new google.maps.Map(document.getElementById("map"),mapProp);
				**/
				/**
				//var infowindowFrom = new google.maps.InfoWindow();
				//var infowindowTo = new google.maps.InfoWindow();
				var markerFrom = new google.maps.Marker({
					map: map
				});
				var markerTo = new google.maps.Marker({
					map: map
				});
				
				// add a marker in the given location, attach some popup content to it and open the popup
				google.maps.event.addListener(autocomplete, 'place_changed', function() {
					L.marker(place.geometry.location).addTo(map)
						.bindPopup('A pretty CSS3 popup. <br> Easily customizable.')
						.openPopup();	
				});
						  
				google.maps.event.addListener(autocomplete2, 'place_changed', function() {
					markerTo.setVisible(false);
					var place = autocomplete2.getPlace();
						
					markerTo.setPosition(place.geometry.location);
					markerTo.setVisible(true);
						
					//	infowindowTo.setContent('<div><strong>' + place.name + '</strong>');
					//	infowindowTo.open(map, markerTo);
				});

				**/
						
						  
			} //end of initialize

			initialize();
					
		</script>
		<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
		<script src="dist/js/bootstrap.min.js"></script>
		<script src="../../docs-assets/js/holder.js"></script>
    </body>
</html>
